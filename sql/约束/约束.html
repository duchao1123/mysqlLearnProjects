<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="exporter-version" content="Evernote Mac 9.7.0 (472010)"/><meta name="altitude" content="0"/><meta name="author" content="super 超"/><meta name="created" content="2023-08-11 11:10:47 +0000"/><meta name="latitude" content="40.05923461914062"/><meta name="longitude" content="116.3372964350577"/><meta name="source" content="desktop.mac"/><meta name="updated" content="2023-08-11 12:14:39 +0000"/><title>约束</title></head><body style="font-size: 14px;"><div>作用：保证数据库中数据的正确性，有效性，和完整性</div><div><div><br/></div><table style="border-collapse: collapse; min-width: 100%;"><colgroup><col style="width: 130px;"/><col style="width: 130px;"/><col style="width: 130px;"/></colgroup><tbody><tr><td style="background-color: rgb(151, 151, 151); border: 1px solid rgb(121, 121, 121); width: 130px; padding: 8px;"><div><span style="color: rgb(255, 255, 255);">约束</span></div></td><td style="background-color: rgb(151, 151, 151); border: 1px solid rgb(121, 121, 121); width: 130px; padding: 8px;"><div><span style="color: rgb(255, 255, 255);">关键字</span></div></td><td style="background-color: rgb(151, 151, 151); border: 1px solid rgb(121, 121, 121); width: 130px; padding: 8px;"><div><span style="color: rgb(255, 255, 255);">描述</span></div></td></tr><tr><td style="width: 130px; padding: 8px; border: 1px solid;"><div>非空约束</div></td><td style="width: 130px; padding: 8px; border: 1px solid;"><div>Not null</div></td><td style="width: 130px; padding: 8px; border: 1px solid;"><div>不能为空</div></td></tr><tr><td style="width: 130px; padding: 8px; border: 1px solid;"><div>唯一约束</div></td><td style="width: 130px; padding: 8px; border: 1px solid;"><div>Unique</div></td><td style="width: 130px; padding: 8px; border: 1px solid;"><div>唯一</div></td></tr><tr><td style="width: 130px; padding: 8px; border: 1px solid;"><div>主键约束</div><div><span style="color: rgb(255, 147, 0);">主键不能修改，可以删除重建</span></div></td><td style="width: 130px; padding: 8px; border: 1px solid;"><div>Primary key</div><div><font face="JetBrains Mono" style="font-size: 14px;"><span style="caret-color: rgb(207, 142, 109);"><span style="font-size: 14px; font-family: &quot;JetBrains Mono&quot;; color: rgb(255, 38, 0); font-weight: bold;">Auto_increment自动增长</span></span></font></div></td><td style="width: 130px; padding: 8px; border: 1px solid;"><div>一行数据唯一标识，非空唯一</div></td></tr><tr><td style="width: 130px; padding: 8px; border: 1px solid;"><div>默认约束</div></td><td style="width: 130px; padding: 8px; border: 1px solid;"><div>Default </div></td><td style="width: 130px; padding: 8px; border: 1px solid;"><div>默认数据</div></td></tr><tr><td style="width: 130px; padding: 8px; border: 1px solid;"><div>检查约束</div></td><td style="width: 130px; padding: 8px; border: 1px solid;"><div>Check</div></td><td style="width: 130px; padding: 8px; border: 1px solid;"><div>满足某一条件</div></td></tr><tr><td style="width: 130px; padding: 8px; border: 1px solid;"><div>外键约束</div></td><td style="width: 130px; padding: 8px; border: 1px solid;"><div>Foreign key</div></td><td style="width: 130px; padding: 8px; border: 1px solid;"><div>与外表保持连接，保证数据一致性和完整性</div></td></tr></tbody></table><div><br/></div></div><div><font style="font-size: 18px;"><span style="font-size: 18px; font-weight: bold;">外键约束</span></font></div><div><b>添加外键</b></div><div>1、创建表时</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font face="Monaco">Create table name (</font></div><div><font face="Monaco">    …</font></div><div><font face="Monaco">    [constraint] [外键名称] foreign key (外键字段名) references 主表 (主表列名)</font></div><div><font face="Monaco">)</font></div></div><div>2、修改表方式加入</div><div><span style="color: rgb(255, 38, 0); --inversion-type-color: simple;">如果字段不存在，不能直接添加外键，必须先添加字段，再添加外键</span></div><div><font style="color: rgb(255, 38, 0); --inversion-type-color: simple;"><span style="caret-color: rgb(255, 38, 0);">注意括号必须写</span></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font face="Monaco">Alter table name add constraint 外键名称 foreign key (外键字段名) references 主表(主表列名);</font></div></div><div><br/></div><div><b>删除外键</b></div><div><font style="color: rgb(255, 38, 0); --inversion-type-color: simple;">只是删除外键作用，不会删除字段</font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>Alter table name drop foreign key 外键名称;</div></div><div><br/></div><div>删除/更新行为</div><div><font style="color: rgb(255, 38, 0); --inversion-type-color: simple;">即作为父表，被字表指定了外键，删除或更新父表行为</font></div><div><div><br/></div><table style="border-collapse: collapse; min-width: 100%;"><colgroup><col style="width: 130px;"/><col style="width: 227px;"/></colgroup><tbody><tr><td style="border: 1px solid rgb(121, 121, 121); background-color: rgb(151, 151, 151); width: 130px; padding: 8px;"><div><font style="color: rgb(0, 0, 0); --inversion-type-color: simple;">行为</font></div></td><td style="border: 1px solid rgb(121, 121, 121); background-color: rgb(151, 151, 151); width: 227px; padding: 8px;"><div><font style="color: rgb(0, 0, 0); --inversion-type-color: simple;">说明</font></div></td></tr><tr><td style="width: 130px; padding: 8px; border: 1px solid;"><div>No action</div></td><td style="width: 227px; padding: 8px; border: 1px solid;"><div>不允许删除和更新</div></td></tr><tr><td style="width: 130px; padding: 8px; border: 1px solid;"><div>Restrict</div></td><td style="width: 227px; padding: 8px; border: 1px solid;"><div>不允许删除和更新</div></td></tr><tr><td style="width: 130px; padding: 8px; border: 1px solid;"><div>Cascade</div></td><td style="width: 227px; padding: 8px; border: 1px solid;"><div>删除/更新子表</div></td></tr><tr><td style="width: 130px; padding: 8px; border: 1px solid;"><div>Set null</div></td><td style="width: 227px; padding: 8px; border: 1px solid;"><div>设置子表为null</div></td></tr><tr><td style="width: 130px; padding: 8px; border: 1px solid;"><div>Set default</div></td><td style="width: 227px; padding: 8px; border: 1px solid;"><div>设置为默认值</div><div>innodb不支持</div></td></tr></tbody></table><div>语法</div></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>Alter table name add constraint 外键名称 foreign key (外键字段) references 主表名 （主表字段名）on update cascade on delete cascade;</div></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div></body></html>