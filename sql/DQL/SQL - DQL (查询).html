<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="exporter-version" content="Evernote Mac 9.7.0 (472010)"/><meta name="altitude" content="0"/><meta name="author" content="super 超"/><meta name="created" content="2023-08-10 02:03:59 +0000"/><meta name="latitude" content="40.05926513671875"/><meta name="longitude" content="116.3370979430323"/><meta name="source" content="desktop.mac"/><meta name="updated" content="2023-08-11 07:22:22 +0000"/><title>SQL - DQL (查询)</title></head><body style="font-size: 14px;"><div>语法结构</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>Select </div><div>        字段列表</div><div>From </div><div>        表名列表</div><div><font face="Monaco">Where</font></div><div><font face="Monaco">        条件列表</font></div><div><font face="Monaco">Group by</font></div><div><font face="Monaco">        分组字段列表</font></div><div><font face="Monaco">having</font></div><div><font face="Monaco">        分组后条件列表</font></div><div><font face="Monaco">Order by</font></div><div><font face="Monaco">        排序字段列表</font></div><div><font face="Monaco">Limit</font></div><div><font face="Monaco">        分页参数</font></div></div><div><br/></div><div>1、查询多字段</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font face="Monaco">Select 字段1，字段2…from 表名;</font></div></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font face="Monaco">Select * from 表名;</font></div></div><div>2、设置别名</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>Select 字段1 [as 别名1], 字段2 [as 别名2] … from 表名；</div></div><div>3、去除重复记录</div><div><span style="color: rgb(255, 147, 0);">结果去重，相同结果只显示第一个查询到的</span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font face="Monaco">Select distnct 字段列表 from 表名； </font></div></div><div>4、条件查询</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>Select 字段列表 from 表名 where 条件;</div></div><div><div><span style="font-weight: bold; font-size: 18px;">条件：</span></div><table style="border-collapse: collapse; min-width: 100%;"><colgroup><col style="width: 203px;"/><col style="width: 224px;"/></colgroup><tbody><tr><td style="background-color: rgb(151, 151, 151); border: 1px solid rgb(121, 121, 121); width: 203px; padding: 8px;"><div><span style="color: rgb(255, 255, 255);">比较运算符</span></div></td><td style="background-color: rgb(151, 151, 151); border: 1px solid rgb(121, 121, 121); width: 224px; padding: 8px;"><div><span style="color: rgb(255, 255, 255);">功能</span></div></td></tr><tr><td style="width: 203px; padding: 8px; border: 1px solid;"><div>&gt;,&gt;=,&lt;.&lt;=,=,&lt;&gt; or !=</div></td><td style="width: 224px; padding: 8px; border: 1px solid;"><div>比较</div></td></tr><tr><td style="width: 203px; padding: 8px; border: 1px solid;"><div>Between … and ...</div></td><td style="width: 224px; padding: 8px; border: 1px solid;"><div>在最小值与最大值之间，包含俩边，最小值与最大值固定位置</div></td></tr><tr><td style="width: 203px; padding: 8px; border: 1px solid;"><div>In(...)</div></td><td style="width: 224px; padding: 8px; border: 1px solid;"><div>在in之后的列表中的值</div></td></tr><tr><td style="width: 203px; padding: 8px; border: 1px solid;"><div>like 占位符</div></td><td style="width: 224px; padding: 8px; border: 1px solid;"><div>模糊匹配</div><div>_匹配单个字符（比如查询只有俩个字符的值 like ‘_ _'）</div><div>%匹配任意个字符 (比如查询以x结尾 like '%x')</div></td></tr><tr><td style="width: 203px; padding: 8px; border: 1px solid;"><div>Is null</div></td><td style="width: 224px; padding: 8px; border: 1px solid;"><div>是否是null</div></td></tr></tbody></table><div><div><br/></div><table style="border-collapse: collapse; min-width: 100%;"><colgroup><col style="width: 206px;"/><col style="width: 222px;"/></colgroup><tbody><tr><td style="background-color: rgb(151, 151, 151); border: 1px solid rgb(121, 121, 121); width: 206px; padding: 8px;"><div><span style="color: rgb(255, 255, 255);">逻辑运算符</span></div></td><td style="background-color: rgb(151, 151, 151); border: 1px solid rgb(121, 121, 121); width: 222px; padding: 8px;"><div><span style="color: rgb(255, 255, 255);">功能</span></div></td></tr><tr><td style="width: 206px; padding: 8px; border: 1px solid;"><div>and 或 &amp;&amp;</div></td><td style="width: 222px; padding: 8px; border: 1px solid;"><div>与</div></td></tr><tr><td style="width: 206px; padding: 8px; border: 1px solid;"><div>or 或 ||</div></td><td style="width: 222px; padding: 8px; border: 1px solid;"><div>或</div></td></tr><tr><td style="width: 206px; padding: 8px; border: 1px solid;"><div>not 或 !</div></td><td style="width: 222px; padding: 8px; border: 1px solid;"><div>非</div></td></tr></tbody></table><div><font style="font-size: 18px;"><span style="font-size: 18px; font-weight: bold;">聚合函数</span></font></div></div></div><div><span style="color: rgb(255, 38, 0); font-weight: bold;">将一列数据作为一个整体，进行纵向计算</span></div><div><span style="caret-color: rgb(255, 38, 0);"><span style="color: rgb(255, 38, 0); font-weight: bold;">所有的null不参与运算</span></span></div><div><div><br/></div><table style="border-collapse: collapse; min-width: 100%;"><colgroup><col style="width: 212px;"/><col style="width: 223px;"/></colgroup><tbody><tr><td style="background-color: rgb(151, 151, 151); border: 1px solid rgb(121, 121, 121); width: 212px; padding: 8px;"><div><span style="color: rgb(255, 255, 255);">函数</span></div></td><td style="background-color: rgb(151, 151, 151); border: 1px solid rgb(121, 121, 121); width: 223px; padding: 8px;"><div><span style="color: rgb(255, 255, 255);">功能</span></div></td></tr><tr><td style="width: 212px; padding: 8px; border: 1px solid;"><div>count</div></td><td style="width: 223px; padding: 8px; border: 1px solid;"><div>统计数量</div></td></tr><tr><td style="width: 212px; padding: 8px; border: 1px solid;"><div>max</div></td><td style="width: 223px; padding: 8px; border: 1px solid;"><div>最大值</div></td></tr><tr><td style="width: 212px; padding: 8px; border: 1px solid;"><div>min</div></td><td style="width: 223px; padding: 8px; border: 1px solid;"><div>最小值</div></td></tr><tr><td style="width: 212px; padding: 8px; border: 1px solid;"><div>avg</div></td><td style="width: 223px; padding: 8px; border: 1px solid;"><div>平均值</div></td></tr><tr><td style="width: 212px; padding: 8px; border: 1px solid;"><div>sum</div></td><td style="width: 223px; padding: 8px; border: 1px solid;"><div>求和</div></td></tr></tbody></table><div>语法</div></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>Select 聚合函数(字段列表) from 表名；</div></div><div><br/></div><div><font style="font-size: 18px;"><span style="font-size: 18px; font-weight: bold;">分组查询</span></font></div><div>语法</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>Select 字段列表 from 表名 [where 条件] group by 分组字段名 [having 分组后过滤条件]</div></div><div><br/></div><div>where 与 having区别</div><div>1、执行时机不同：where是分组之前，having是分组之后</div><div>2、判断条件不同：where不能对聚合函数进行判断，having可以</div><div><br/></div><div>案例：</div><div>查询年龄小于45岁的员工，并根据工作地址分组，获取员工数量大于等于3的工作地址</div><div>需求拆分：</div><div>1、获取的是地址；</div><div>2、过滤所有员工年龄小于45</div><div>3、根据工作地址分组</div><div>4、分组数量大于等于3</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>Result:</div><div>Select  work_address as ’工作地址’, count(*) as count from table where age &lt; 45 group by work_address having count &gt;= 3;</div><div><br/></div><div><font face="Monaco">推演：</font></div><div>1、</div><div>Select * from table where age &lt; 45;</div><div>2、</div><div>Select * from table where age &lt; 45 group by work_address;</div><div>3、</div><div>Select count(*) from table where age &lt; 45 group by work_address having count(*) &gt;= 3;</div><div>4、</div><div>Select work_address as ’工作地址', count(*) as count from table where age &lt; 45 group by work_address having count &gt;= 3; </div></div><div><br/></div><div><font style="font-size: 18px;"><span style="font-size: 18px; font-weight: bold;">排序查询</span></font></div><div><font size="4"><b>Asc:    升序</b></font><br/></div><div><font size="4"><b>desc：降序</b></font></div><div><font size="4"><b>支持多字段排序，如果第一个字段排序相同，会根据第二个字段排序</b></font></div><div><span style="font-size: 14px;">语</span><span style="font-size: 14px;">法</span></div><div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>Select 字段列表 from 表名 order by 字段1 排序方式, 字段2排序方式;</div></div></div><div><font style="font-size: 18px;"><br/></font></div><div><font size="4"><b>分页查询</b></font></div><div>语法</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font face="Monaco">Select 字段列表 from 表名 limit 起始索引, 查询记录数;</font></div></div><div><font style="font-size: 18px;"><br/></font></div><div><font style="font-size: 14px;" color="#ff2600">注意：</font></div><ul><li><div><font style="font-size: 14px;" color="#ff2600">起始索引从0开始，起始索引 = （查询页码 - 1）* 每页记录数</font></div></li><li><div><font style="font-size: 14px;" color="#ff2600">分页查询是数据库的方言，不同数据库有不同的实现，mysql是limit</font></div></li><li><div><font style="font-size: 14px;" color="#ff2600">如果查询的是第一页数据，起始索引可以省略，直接简写limit count</font></div></li></ul><div><font style="font-size: 18px;"><br/></font></div><div><font size="4"><b>执行顺序</b></font></div><ol><li><div><font size="4" color="#ff2600">from</font></div></li><li><div><font size="4" color="#ff2600">where</font></div></li><li><div><font size="4" color="#ff2600">group by</font></div></li><li><div><font color="#ff2600" size="4"><span style="caret-color: rgb(255, 38, 0);">having</span></font></div></li><li><div><font size="4" color="#ff2600">select</font></div></li><li><div><font size="4" color="#ff2600">group by</font></div></li><li><div><font size="4" color="#ff2600">limit</font></div></li></ol><div><font style="font-size: 18px;"><br/></font></div><div><font style="font-size: 18px;"><br/></font></div><div><font style="font-size: 18px;"><br/></font></div><div><font style="font-size: 18px;"><br/></font></div><div><font style="font-size: 18px;"><br/></font></div><div><font style="font-size: 18px;"><br/></font></div><div><font style="font-size: 18px;"><br/></font></div><div><font style="font-size: 18px;"><br/></font></div><div><font style="font-size: 18px;"><br/></font></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div></body></html>